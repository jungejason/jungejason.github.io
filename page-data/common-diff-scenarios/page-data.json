{"componentChunkName":"component---src-templates-blog-post-js","path":"/common-diff-scenarios/","result":{"data":{"site":{"siteMetadata":{"title":"Mushyroom Blog","author":"Jason Ge 葛俊"}},"markdownRemark":{"id":"8bf66025-c961-5ecc-993c-c5d96ad8e69f","excerpt":"查看 diff 是开发工作中常见一个场景，值得优化。下面做一些总结。 总结的基本思路是少就是多。比如 使用尽量少的工具，尽量少安装插件。这样可以减少工具入口，减少不必要的心智负担。 只处理最常见的场景。至于更偏的场景临时Google找解决办法。 场景一：在 git diff…","html":"<p>查看 diff 是开发工作中常见一个场景，值得优化。下面做一些总结。</p>\n<p>总结的基本思路是<strong>少就是多</strong>。比如</p>\n<ul>\n<li>使用尽量少的工具<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>，尽量少安装插件。这样可以减少工具入口，减少不必要的心智负担。</li>\n<li>只处理最常见的场景。至于更偏的场景临时Google找解决办法。</li>\n</ul>\n<h2>场景一：在 git diff 中显示更细粒度差别</h2>\n<p>默认的<code class=\"language-text\">git diff</code>显示粒度以行为单位，比较粗。比如</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb05aa9cd9538e7192a38b47a05ca3e1/d7e70/git-diff-default.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACDUlEQVQoz52TyW7bMBCGqVi0FdqyJVmmqcWrLK9xHDdJGwdFszTooUlzy8sYvLkPUPTYFw1QAvzLFkYDNMiCHj7MDDHzAzOcIdz1VuWsuNnh1no6nMlB3pGtVirzfCiXy7kcDLqyUCDSsixJCHmKteGr4Yq8O4o2b0855osAtzcZVicxbr/0cXnRxo2Jb6574NyBSX4NP0gzdtbjcRXX1+n93V1bTaau4oKqILCV5+0o3ysok/gS91vBb+RsfCSP8wnOl1P16WRfr/I93a1l2gsCHYlEezVfp0mihRDaFGjLIn/sP/zcCn4n1V1fjoZ7yHoTlQ9mOo17mM8WZgT7CDkHFxFEFMNh5edafRCs7FLZ9lx0PFcl1bLueBWMGgH8UglhkSJmDoISRchMbHzhMhDrGUEvrcrsKEL+PlHdVaSHH1qYXHWQvOFIFw3jdyH6PtJRHY1WFfGwDpvZTwvajEo39sHHsWov+5pyhsY0RnpgRGcd1PrhQ6H1ipYZLcmgVAYjBcWIrR0z5Aop6CLZ0cyiJrY0NW/FraXkhU8JY3e9PExxeNy5P1i21PnlSH38PFXZpKkmI6FOz3I1nkZqOo9VnjfV3iJVjusou2Ars+yP14buFje1pI4gbUBkCX77XitEsx3Bj0LwXoxKvYqSx+CLOuomj0ccoilAKX282GWHrSpFttmej/xP/p7eLy/D+RWRNxGbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-default\"\n        title=\"git-diff-default\"\n        src=\"/static/eb05aa9cd9538e7192a38b47a05ca3e1/fcda8/git-diff-default.png\"\n        srcset=\"/static/eb05aa9cd9538e7192a38b47a05ca3e1/12f09/git-diff-default.png 148w,\n/static/eb05aa9cd9538e7192a38b47a05ca3e1/e4a3f/git-diff-default.png 295w,\n/static/eb05aa9cd9538e7192a38b47a05ca3e1/fcda8/git-diff-default.png 590w,\n/static/eb05aa9cd9538e7192a38b47a05ca3e1/efc66/git-diff-default.png 885w,\n/static/eb05aa9cd9538e7192a38b47a05ca3e1/c83ae/git-diff-default.png 1180w,\n/static/eb05aa9cd9538e7192a38b47a05ca3e1/d7e70/git-diff-default.png 1286w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>解决方案1 - 使用 git diff 的 option：</h3>\n<p>如果希望一目了然看到更细微的差别，可以使用 <code class=\"language-text\">--color-words</code> 选项：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/abb0bea705cfb71052285cf70f34d1d1/0d98f/git-diff-color-words-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVQoz42SS2/TQBDH141f68c6duzYjeN3GmIrVRKVUoRaKCfKAVW5lktzQXwPyAVxbg+gckR8Qqpm5T9OVFE4UHr4aR6a+WtmdgmT2FSMWu9agXiex6NFmqULx/EXWTZaDIflIgyTBSHkf5w3vG84IE8f9z5N9l0MRhaOn6c4fBbh5FWGo8MEr0+Kxs/RD3U0xQ/hikSZ+nF318J8Hl2fvU35ZMZ4sUN5Eqs8ilSeZxoXBMKb4vu4vhW8IC+rJ8v94SOcHs9Wb44n9eFoXId6Utsdr7YdrzZNu/a63dr3/bpp+Bc3t4KXpMzHy2FeoUirVZFVdRIOMBlPUVYlAj9AEsXoBT3o9N617wQ7TF86ugbfMFa2otRdQ4en6aCyBCISCFRAi4kQGxRHQYu2oKoqNE2DoigbJEm6WecEQbgkETOW4yLA3kG+KqdRPZv2sTeJMXyRopgPsX0UgvoUbMdCu7Qh2zIsZsF1XTDGYNv22t6s/Y2gZrEltS1YPW/V7nk1UUWYgQvHd+F7XUii9JDXvVu537Y+BJTCE6XrrqysCsZ4KCucUpGLXZnTgHIjNrmZM94e2Vxqy5yZjHc6HW6a5gZd1382dj3hBYkc5/NwO0CVxBjFEaqojzLsIx/ESKYp4iqGm3tgEUM2y+GGHvI8x2AwgGEYm1uu70eboRrBb6TdcU+3ZPl7M+7Xzcf8zdbGCkS4+jO/jpvGq79ryZeGHw1nvwDOXeW6OQhOmAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-color-words-1\"\n        title=\"git-diff-color-words-1\"\n        src=\"/static/abb0bea705cfb71052285cf70f34d1d1/fcda8/git-diff-color-words-1.png\"\n        srcset=\"/static/abb0bea705cfb71052285cf70f34d1d1/12f09/git-diff-color-words-1.png 148w,\n/static/abb0bea705cfb71052285cf70f34d1d1/e4a3f/git-diff-color-words-1.png 295w,\n/static/abb0bea705cfb71052285cf70f34d1d1/fcda8/git-diff-color-words-1.png 590w,\n/static/abb0bea705cfb71052285cf70f34d1d1/efc66/git-diff-color-words-1.png 885w,\n/static/abb0bea705cfb71052285cf70f34d1d1/c83ae/git-diff-color-words-1.png 1180w,\n/static/abb0bea705cfb71052285cf70f34d1d1/0d98f/git-diff-color-words-1.png 1276w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>可以看到，它会显示以 word 为单位的比较。这里 word 是以空格键作为分割的单元。</p>\n<p>希望更细粒度的比较，比如按照 char 比较，可以使用  <code class=\"language-text\">--color-words=.</code> 选项：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bac5778fbe41b71e370954a0d782b593/71b12/git-diff-color-words-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAByUlEQVQoz42Rb2/SQBzHr1CgjNIeLRRa1r/QjYIlzMhc1DhNhtmij918A9pkamJ8IeoDH/hKdd7lvh4NUWNUePDJXS6/++R79yUtX7smEXkVDkfFbJYVntcvJpO8mE6zYrlcFpZlFISQbbyUvJVk5P5DF5M5xfmTGI8fhXh6EePifITVWYQXVxmyzIKqViCHd+EdSUZ7WK3cm+eXAbtzTHlvoHLXrXNKq3zQr/FKhXA5uI1vG+FrcvdgirPlLf7sdCFO57kY01R07YHodh1hWT2JLXzfF4qiCHnhX3zfCN+QWZojjTOepXOR7I+RH+Y4Olqg3+/D9/fheR5M09z2VPZTaJgGKDV5q7knOpSi0+lAa2pQ5IBW11Cr1aBpGhqNBlqtFqrV6v+F3shDenLAw2UsotsxRsdjRA8S+IsA45MUbbNdJlzLDMOQBanbE5q2yZ2hIxRVgU512E4XPc+Bpmu7tvtLaFs2qElv2nqbua7HBo7N6NBkdbXOLMtitm0zmbCEUsp0XWfy2UyWxDaiNV83wmuy/vQwDBFFEYIgQOAPER9GZSlJkpSrlJTl/E6z2fxb0vdEfvZnufm44dMuyHR/nn2QfJHc+wGh8OK6zYfU8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-color-words-2\"\n        title=\"git-diff-color-words-2\"\n        src=\"/static/bac5778fbe41b71e370954a0d782b593/fcda8/git-diff-color-words-2.png\"\n        srcset=\"/static/bac5778fbe41b71e370954a0d782b593/12f09/git-diff-color-words-2.png 148w,\n/static/bac5778fbe41b71e370954a0d782b593/e4a3f/git-diff-color-words-2.png 295w,\n/static/bac5778fbe41b71e370954a0d782b593/fcda8/git-diff-color-words-2.png 590w,\n/static/bac5778fbe41b71e370954a0d782b593/efc66/git-diff-color-words-2.png 885w,\n/static/bac5778fbe41b71e370954a0d782b593/c83ae/git-diff-color-words-2.png 1180w,\n/static/bac5778fbe41b71e370954a0d782b593/71b12/git-diff-color-words-2.png 1308w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>解决方案2 - 使用 vimdiff:</h3>\n<p>我们可以使用 vimdiff。首先在.gitconfig 中设置：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> ~/.gitconfig\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">[</span>diff<span class=\"token punctuation\">]</span>\n  tool <span class=\"token operator\">=</span> vimdiff\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>然后 <code class=\"language-text\">git difftool</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38de8d2dacb14aa2935954e830a10560/1078c/git-difftool-vimdiff.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBklEQVQozyWRyW7bMBCG9RbNJXZjxLWWaJclixJJLbHkJbFaIN0TpLZRpE1z6bu0ubXXgNcWCHRuXyoBCUxp9fDj/4n5OBgOldny9Nd8sbybz2tWV1NGCWZZRhjGCUsTxHCaMIQQW5w2bHFyymazilV1xYjkaL7jUpYk6I5S/Lso8o1iumMg5QIwyYFkJYwjBF4YguX4YJgOON4YVFUFx59AXs6B4AxymkEUxuCPQ7AtD44MGxzbl5zxUyFBBF9frx+umjf86vl7/vnFOd8uz6Redro5u+SR5fGIpHx9c81frdf8fHvB3203Mn/gbz9udnq4uP4EVbP6priWA3Vec4oo5DGCY1oCiQmkEe78mEzBNEywXRfKagYI50BxLKc9BkQyec4gpQWnxVQy/q3iOB7QrOZxmgGhspFsiEgBMcrlGiqYVg1Ylgu27UJGa0BJDjmeSLYAlEoulvfwlJfFUj47vFUsy4RwHDw6nimi2BW2YwpdU8VwOBD9/r44OHgqBoOBkJwIAl/YrinC2Os4VR2Jw8OB6PV6j/1+D/b2nnxXdF0DXddBN3RQNRU0mUejEQyHw0673NV1VS5fh6MjQ7Ja55o2kvVn8jNGXe719n8ocRz8iSL/XqqdTII2DP12l4PAa13XbT3Pa7Ns0tb1fzWrtG0aLB13fnKStKsVvpf5bxgaX/4BnYv9zPhd3dcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-difftool-vimdiff\"\n        title=\"git-difftool-vimdiff\"\n        src=\"/static/38de8d2dacb14aa2935954e830a10560/fcda8/git-difftool-vimdiff.png\"\n        srcset=\"/static/38de8d2dacb14aa2935954e830a10560/12f09/git-difftool-vimdiff.png 148w,\n/static/38de8d2dacb14aa2935954e830a10560/e4a3f/git-difftool-vimdiff.png 295w,\n/static/38de8d2dacb14aa2935954e830a10560/fcda8/git-difftool-vimdiff.png 590w,\n/static/38de8d2dacb14aa2935954e830a10560/efc66/git-difftool-vimdiff.png 885w,\n/static/38de8d2dacb14aa2935954e830a10560/c83ae/git-difftool-vimdiff.png 1180w,\n/static/38de8d2dacb14aa2935954e830a10560/1078c/git-difftool-vimdiff.png 2180w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>解决方案3 - 使用 IDE:</h3>\n<p>也可以使用常用的IDE。这样的好处是对大的改动比较好，比如，在WebStorm中， 使用Local Change窗口。可以看到，WebStorm提供可视化的比较选项，很方便。不过，坏处是没有命令行查看快捷，尤其是简单的改动。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28d848b40d6be86009eb0830aed52efc/88745/git-diff-in-ide.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADvUlEQVQ4yz1Uu47kRBT1/zA7Pe52+1Gu8qv8fvXLM9Mzs8NsgISQNiBBmyJtSAQtEladIRHyDdASGV+xUscEBIAtH255Rhsc3dvt8ql7z7nX2u1Kvkvr5OcgSj8EcXr0QvmCeIpxVhyzsj6mRUl5eYzoTBDJYyiTKQ8JUZJ+SPLyF5nmd9qu2/25f7jHZrtGWTfI8hxZkSNVkVC3DcpGocV6s8Ld60esuj3iNEOS5ZBZNiGhs1Gc/KR5Sf1b1d2j2N7/a0fVMEFWg0XRDIrBDEuK+SAEH+qYDUXdDnlZDy53BpuZw2IxH+bzxT+GsYBpmt9rcV6d2l2H7vpuCJISQmYQcT7Bm1BARCls10MYcHBugXEHgi3hmHOYljUaxry/urqCbTsHLSuK02b/gNdPT0NFralW06KgWDy3Tbmk9hzOEQQuBBG6jMMXLqg66Lo+ElmvX+mwLOugyZwIr2/R3e6HdrNFTERkxCck9DsiQiY8BL4Lly9hquosHY49h+uK0eNWv6CWifigkUMnVQHFISaRFYESWAk+gXL1nHFVlT2RmNacqlGaUb40R8cy+vlcx6uLC6owzU9JUanKBvWiTFNyjdrMa0I1xTAp4IgIXhgRsYDnMnDhw/VCGDYbDYv3S5vDsNhBS8r2tHl6hzdffzfsv/wWzcM3KLovUK6vUaxvUG/v0NIUlOtbFJs9mrbDY7PFY7XCLcXm5nFMq23f7O7o7P5Zw3L3Bjefvx22D2/R7r9C1e6wKQK0mw5Vs0KaSsg4IL0YmMuxTgV2qxp5QV3IaOSe0zNmgTPlclWflJuhDIcojiCTGJEMEZEBfhRBBCEcx4SxNKHacmQNL/ARRj6NWExmsdF2rH7pMLiBPGg5ERImDWl9oKB0DEKfDjvkqg/fE7BsBxbz4GYdonaFuA4hcqq8TkeRer0ZqWcxEZbVKSvJlCwfkheXZUKEQQARerB9n4aZbhc01CG5HTcQ038ObO7Ccd3Rts3etGlG/fCgba9vTgXt8ESYP8+dzJLnmXNNOMwk3WxQW7QJjC5IyPUYYSjAAoLHR5fbPfcCGrPqoNHS/z6RpFlPGIl4DKQcl0t91GcXozH7bKQZG3X9apzNLseFaY3MpXWbX07PlhQXhvHfbHaBy8tXPygN/1AalnU7fVFKcjUksU1LVcVgKZB+pmm96EjGMGqVMTJLnXFUPqq4WBg/aklW/Eoa/kVtf6ya9kykZ7rgTPtMKD9F6uJM1Z9po6bYrqpz1a7O9Wp93uy6j5vd9d/0+Xv/P5f5SNf6uuWVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-in-ide\"\n        title=\"git-diff-in-ide\"\n        src=\"/static/28d848b40d6be86009eb0830aed52efc/fcda8/git-diff-in-ide.png\"\n        srcset=\"/static/28d848b40d6be86009eb0830aed52efc/12f09/git-diff-in-ide.png 148w,\n/static/28d848b40d6be86009eb0830aed52efc/e4a3f/git-diff-in-ide.png 295w,\n/static/28d848b40d6be86009eb0830aed52efc/fcda8/git-diff-in-ide.png 590w,\n/static/28d848b40d6be86009eb0830aed52efc/efc66/git-diff-in-ide.png 885w,\n/static/28d848b40d6be86009eb0830aed52efc/c83ae/git-diff-in-ide.png 1180w,\n/static/28d848b40d6be86009eb0830aed52efc/88745/git-diff-in-ide.png 2148w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>场景二：比较两个文件显示更细粒度的差别</h2>\n<p>比较两个文件时，默认的<code class=\"language-text\">diff</code>命令也有力度不好的问题：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d68581e535a7378083e14f4c0672823/4a00e/diff-default.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVQoz32QTU7DMBCF3UV/1CRNUreJEte0aVQlCDZVuAAH4AJcgSOUXTeVd9AlN6nkA8CFinBk82wFhBBi8TTjOP7mvSE0oPc+899ISU6LxULWdS3n87ksy1IWRSGrqpKz2UwSQv7TCXqFHkiSJHvOucmyzIRhaKIoMpRSJ8/zzGQycf14PHb9aDQyvu+7CsBvvRD8tAPULJfLM5wpPG7RO8Vx3OK+hfM2TdMW99+aTqctAF9674BPBJeP1gFcfgCiGWN6vV5rQDQiawzTiK/hXPf7fQ3Xejgcutrr9TQgVqoDHkme5zsADPZ0hhsFVwq9ggOFRyoIAvcNEd15MBgoxHe1A6kfDp9t5D0ABs4M3BpEs/GdQuzT7g1D7UAnwN1O7b7/3KHvebfZanWsm5sD22xEcXUtqu1WXDaNyMpSRHEsiroQvOaCXlDBKy6SLBEsZwKRBSBWBxeXkLtPxKqQhpZL2XEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"diff-default\"\n        title=\"diff-default\"\n        src=\"/static/7d68581e535a7378083e14f4c0672823/fcda8/diff-default.png\"\n        srcset=\"/static/7d68581e535a7378083e14f4c0672823/12f09/diff-default.png 148w,\n/static/7d68581e535a7378083e14f4c0672823/e4a3f/diff-default.png 295w,\n/static/7d68581e535a7378083e14f4c0672823/fcda8/diff-default.png 590w,\n/static/7d68581e535a7378083e14f4c0672823/efc66/diff-default.png 885w,\n/static/7d68581e535a7378083e14f4c0672823/c83ae/diff-default.png 1180w,\n/static/7d68581e535a7378083e14f4c0672823/4a00e/diff-default.png 1406w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>另外，高亮显示也没有<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup><sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>。</p>\n<h3>解决方案1 - 借用 git diff：</h3>\n<p>不在git代码仓中，我们也可以使用<code class=\"language-text\">git diff</code>。只要添加一个<code class=\"language-text\">--no-index</code> 选项：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/141b0804d0c75572c549efd8fab6a69b/5b6ee/git-diff-non-git-files-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8UlEQVQoz42S227TQBCG15v1MbYT07h24vX6kLiQpEkgQQpVWyG4BBWBxBvwFpUvAzdc8EaV8gJ9HFAtuT+bA1UEEurFp5mdHf36Z3YJCciKedq14HkZRUEZht0ySZIyz/sy98uTIi6n01HJOZdxInsieZeXw+Fwi23bJSHkWrKSvCbLi2O8Og/w4aqP8/Mu3r/L8PaNkOcBLi8iFIWHMHShqiosy4KmadB1HYZhwDRNUEohhf7wgyznAT5epb8+f8qqy7Ne1QutyjQblW2zijFSyabH8HMvuCLz/gzPRFGNkyHOijlmJxNwIcC5QBCE6Oc5ms3moYu/ud+LbvJvJOz20A26VedJB50jHzyK0XZb0Boa5H6gaur/xP4VHPgtiNCt0qCF08RH5rtwCwfe4gjNzEZT2Gg9bcvcgWEb8Ds+2u32FsdxNvFe7vXAoQiQPE+r40EIL/GQnAqIWYJ4KqC7+s6FokCRPMqhZ5iwFHZnU1bbSqPeRNVQa2axWtFpzRy1VltqTS1aK1SpVSbvGKulq4coX/puL/iVTKIeRjHHizTBIhWYxTHEKEa27CMac3SGPnoLjvRlhpCHGI/HkH9xO+5mx67rbr/SXvA7oZp2K0e6IQpdy8KaULqmZIdClF1Nsq3JHjn6Q+2AG8mt5Mtv0efWO/e+PtAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-non-git-files-1\"\n        title=\"git-diff-non-git-files-1\"\n        src=\"/static/141b0804d0c75572c549efd8fab6a69b/fcda8/git-diff-non-git-files-1.png\"\n        srcset=\"/static/141b0804d0c75572c549efd8fab6a69b/12f09/git-diff-non-git-files-1.png 148w,\n/static/141b0804d0c75572c549efd8fab6a69b/e4a3f/git-diff-non-git-files-1.png 295w,\n/static/141b0804d0c75572c549efd8fab6a69b/fcda8/git-diff-non-git-files-1.png 590w,\n/static/141b0804d0c75572c549efd8fab6a69b/efc66/git-diff-non-git-files-1.png 885w,\n/static/141b0804d0c75572c549efd8fab6a69b/c83ae/git-diff-non-git-files-1.png 1180w,\n/static/141b0804d0c75572c549efd8fab6a69b/5b6ee/git-diff-non-git-files-1.png 1672w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f353aea63751e7895b8f94aff8ad6d4d/8bb81/git-diff-non-git-files-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5ElEQVQoz31SXYvTQBSdpEmapk3SNh+bNJl8ttJa2Fqqu+6ysvgmqLsi7Ivgg79oCUERZR8U6bv+uQrzcLwNXZCl9OFwMncyZ+49Z1jgW+/bUeuu63erIs3qNPUIcV0UST2fP6o592nt1tNpSZzWZVnWeZ7Xcbz9p6hns1kdBEElSdIdY+yGXVwcfV+duHhxGeLqKsfzMx9vXmc4Pwvx7rrE6UmAOO7BcQy0Wgo0TYWqqlAUpWFN05pvEtviJxvHzu1y7uHDzWTz9lUmzleRiENTKKosDEMRksQEYzKBHcJmJ/iZvXx8WS3HCywnC/GEeFUscLp4hrwswHmCJEkxmYzRbmv3XeyD2PFXNvScyvN9eK4nbNvGcOggDEfQNR2KpMDo0KhKC+RRM9qWDwr2+/0qLEbgx1zEcw4+S5A9zeGMXSTHKXzuw+pZsCwLg8GAOm0fFjR6RmW7NoIsELZvQ+mpOOIB3JELJ3LBZHZo1D0jD4a3Zs+EoXc2lmkJu0twTKG1NWHohjBNk8IxRKfTaVjXdQpKehjK353gF+Z53reYxxQAR5bniMi/8TSHH/pNjd4byBb45HMURaA314Au2NfpD0befJRl+Q8tfhHW95CYtKZO1v/XmjrVKJyHe9uzvwmf/gFgCNII/5yQywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git-diff-non-git-files-2\"\n        title=\"git-diff-non-git-files-2\"\n        src=\"/static/f353aea63751e7895b8f94aff8ad6d4d/fcda8/git-diff-non-git-files-2.png\"\n        srcset=\"/static/f353aea63751e7895b8f94aff8ad6d4d/12f09/git-diff-non-git-files-2.png 148w,\n/static/f353aea63751e7895b8f94aff8ad6d4d/e4a3f/git-diff-non-git-files-2.png 295w,\n/static/f353aea63751e7895b8f94aff8ad6d4d/fcda8/git-diff-non-git-files-2.png 590w,\n/static/f353aea63751e7895b8f94aff8ad6d4d/efc66/git-diff-non-git-files-2.png 885w,\n/static/f353aea63751e7895b8f94aff8ad6d4d/c83ae/git-diff-non-git-files-2.png 1180w,\n/static/f353aea63751e7895b8f94aff8ad6d4d/8bb81/git-diff-non-git-files-2.png 1602w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>解决方案2 - 使用 vimdiff：</h3>\n<p>使用<code class=\"language-text\">vimdiff index.js new-index.js</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/716214bc4eb8f6d4834817a5fa9d54cb/5522e/vimdiff-files.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAByklEQVQozzWN24rTUBSG8yK2SdvUOk5zGLKzT9k5NWmSpsXWlqFWHGGeyicQH2H2heADaD2ACN6qd4L3zg7LPR28+PjX+tcHy5gVxavlZvsuneU3ZVVKkQiJGZGYYokwkkGIZIhDSRmT6Wwui6KQ87KQcRxLQrAk+hYidIOC4C0l+LVhmtb3NK2hna80LdSzGhKRQsJTYIgDxxEIEoNtj4FnNdTtGqpmCXVVAU8zEFkOlMfAogQwjf4Y/V7v4zrO4Hqx/rvPa/Wy2airaqX2Wa3u9uflUh3mKzWxx6pc1Wp39Uw127XaHnZqfbhUq/1WPTnsbjcv9tBePv1hWJb1mbAERNooxmJIkhxYPAfCcuCihCRrNQsYjx8CwULfG4iogDyKIBLaIxlwVnSp7jkvfxmDweATxhQYE7eM4U7ErAsx7YIg7C78oEOInLBtu8OEdvppx7j2hO7vPKS9C6S0A54f/DSGw+G36fQcHMeBqfsYHPccJpMJjEZDME0T+v0eaEfvI/jvOZ5OfwpnZ4/A1r1lmSd6vQe/jTxHb6qKfF0s6PtFw46Npm25Tnqsa6rn+44xdAwC/+i67tFx7vE874Tvex90fnHdqfwHqGLf9GrG/MwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vimdiff-files\"\n        title=\"vimdiff-files\"\n        src=\"/static/716214bc4eb8f6d4834817a5fa9d54cb/fcda8/vimdiff-files.png\"\n        srcset=\"/static/716214bc4eb8f6d4834817a5fa9d54cb/12f09/vimdiff-files.png 148w,\n/static/716214bc4eb8f6d4834817a5fa9d54cb/e4a3f/vimdiff-files.png 295w,\n/static/716214bc4eb8f6d4834817a5fa9d54cb/fcda8/vimdiff-files.png 590w,\n/static/716214bc4eb8f6d4834817a5fa9d54cb/efc66/vimdiff-files.png 885w,\n/static/716214bc4eb8f6d4834817a5fa9d54cb/c83ae/vimdiff-files.png 1180w,\n/static/716214bc4eb8f6d4834817a5fa9d54cb/5522e/vimdiff-files.png 2680w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>解决方案3 - 使用IDE：</h3>\n<p>如果你常用的IDE支持的话，使用它做 diff 也很方便。比如Intellij 系列IDEA支持命令行diff选项。</p>\n<p><code class=\"language-text\">idea diff index.js new-index.js</code></p>\n<p><code class=\"language-text\">webstorm diff index.js new-index.js</code></p>\n<p>下面是Webstorm截屏：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac67923de60f04a65b9034334070ceb1/f291a/webstorm-diff.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.64864864864865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJklEQVQoz22RzY7TMBSF8zTT5s+O7dixk+Y/TdpOq9Fs2PMSUwmJhwFlh3gY1DUSjwFTRwe3LABpFke5jr977tWxt3/afmn78fN22s39MM7DuJu3034+np7m/eNpPj093+vd4TRPh+M87Q9z12/nuu3nphvmqulu+jSM09eybh+9aewx7o8Ypj3qtkPb9cg3JTZVjbzYoGpa979H33UYxy366YDKncu6QVFWkJm+61Zrk3/0GiNhqvZXlpc2YcQSSmwYxdYPQuv7gaU8tYk0NhPUViazetNapQtLaWQJcWwY2cAPf7ovCGUvXl61yOremmaAzjLwVIFJjSgRiCiHMDXU+A569wwzdND7A8w0QlcGvNqAOcVGX0mRg9fN2VOmhChKK/ICSgpnKMGVARXKGTJwXSHdDBC6cMrAlILMc7BUIKQEIYnhx9E1SigoZ2dP3kFjuZIQkjswRZrlSHWO2BkyaaDqHbJqC71pIJveLVAgUxzKFDBl7wbUV8IVEqHOXmbc6iy2kofgnCOOCXx/DX+9RuD7SBIG4WJIpdtMuUhoAMljsDsbIwpDRFF4dQIh8dkTbiMuxGtMyBKG4X8KgmBJGF/SzCwuisWZLpwnC+N0+cNHd8YPgtfImVNKX7xUyvvk2zR3CWf0V+6cMIHUZZq5CJTjpNK4vei/7K2OouhWf/DWq9X31Wr1zff9y1uKCb0wIS+pyi6u6eKa3+Ju/T8eHh7e/wYwLzQ4emERtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webstorm-diff\"\n        title=\"webstorm-diff\"\n        src=\"/static/ac67923de60f04a65b9034334070ceb1/fcda8/webstorm-diff.png\"\n        srcset=\"/static/ac67923de60f04a65b9034334070ceb1/12f09/webstorm-diff.png 148w,\n/static/ac67923de60f04a65b9034334070ceb1/e4a3f/webstorm-diff.png 295w,\n/static/ac67923de60f04a65b9034334070ceb1/fcda8/webstorm-diff.png 590w,\n/static/ac67923de60f04a65b9034334070ceb1/efc66/webstorm-diff.png 885w,\n/static/ac67923de60f04a65b9034334070ceb1/c83ae/webstorm-diff.png 1180w,\n/static/ac67923de60f04a65b9034334070ceb1/f291a/webstorm-diff.png 2258w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>如果愿意使用更多工具，则可以考虑使用<a href=\"https://www.colordiff.org/\">colordiff</a> , <a href=\"https://www.npmjs.com/package/diff-so-fancy\">diff-so-fancy</a>, <a href=\"https://www.gnu.org/software/wdiff/\">wdiff</a>等。</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-2\">\n<p><a href=\"https://www.colordiff.org/\">colordiff</a> 可以有高亮显示：<code class=\"language-text\">colordiff file1 file2</code>, <code class=\"language-text\">colordiff -u file1 file2</code>.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a>\n</li>\n<li id=\"fn-3\">\n<p>有的工具也可以从pipe接受diff的输出屏显示高亮。比如 <a href=\"https://jonas.github.io/tig/\">tig</a> <code class=\"language-text\">diff -u file1 file2 | tig</code>;  <a href=\"https://www.npmjs.com/package/diff-so-fancy\">diff-so-fancy</a> <code class=\"language-text\">diff -u index.js new-index.js | diff-so-fancy</code>; <a href=\"https://www.colordiff.org/\">colordiff</a>  <code class=\"language-text\">diff -u file1 file2 | colordiff</code></p>\n<a href=\"#fnref-3\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"常见diff的场景的优化","date":"December 05, 2020","description":"Optimization of common scenarios of diff","tags":null}}},"pageContext":{"slug":"/common-diff-scenarios/","previous":{"fields":{"slug":"/git-bisect-run/"},"frontmatter":{"title":"自动化寻找问题commit的利器: git bisect run","tags":null}},"next":{"fields":{"slug":"/ideavim/"},"frontmatter":{"title":"核心工具之 ideavim","tags":["core-toolset","toolsets","ideavim","jetbrains","vim"]}}}},"staticQueryHashes":["426816048","63159454"]}